<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>ProphetSolAI â€” Oracle Awakening</title>

  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    html,body{margin:0;padding:0;height:100%;background:#000;overflow:hidden;font-family:'Share Tech Mono',monospace;color:#00ff90;}
    .hide{opacity:0;pointer-events:none;transition:opacity 1s ease;}
    .show{opacity:1;pointer-events:auto;transition:opacity 1s ease;}
    .opening{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:#000;z-index:50;overflow:hidden;}
    .opening img{max-width:80vw;max-height:80vh;filter:brightness(1.05) contrast(1.1) saturate(1.1);}
    .cli{position:absolute;bottom:8vh;left:50%;transform:translateX(-50%);font-size:1rem;color:#00ff90;text-shadow:0 0 8px rgba(0,255,120,.5);}
    .glitch{animation:glitchFlash 1s ease;}
    @keyframes glitchFlash{
      0%{filter:none;}
      20%{filter:contrast(2) saturate(2) hue-rotate(60deg);}
      40%{filter:invert(1);}
      60%{filter:contrast(1.2) saturate(1.4);}
      100%{filter:none;}
    }
    canvas{position:absolute;inset:0;opacity:0;transition:opacity 1s ease;}
    canvas.show{opacity:1;}
    video{position:fixed;inset:0;width:100%;height:100%;object-fit:cover;opacity:0;transition:opacity 1s ease;}
    video.show{opacity:1;}
  </style>
</head>
<body>
  <audio id="glitch-sound" src="./glitch.mp3" preload="auto"></audio>
  <audio id="type-sound" src="./type.mp3" preload="auto"></audio>

  <section id="opening" class="opening">
    <img src="./intro-image.jpg" alt="ProphetSolAI Vision">
    <div id="cli" class="cli"></div>
    <canvas id="matrix"></canvas>
  </section>

  <video id="hero" muted autoplay loop playsinline>
    <source src="./prophet-bg.webm" type="video/webm">
  </video>

  <script>
  // ===== MATRIX RAIN =====
  const canvas=document.getElementById("matrix");
  const ctx=canvas.getContext("2d");
  let w,h,cols,drops,font=18,chars="01".split(""),active=false;
  function resize(){w=canvas.width=window.innerWidth;h=canvas.height=window.innerHeight;cols=Math.floor(w/font);drops=Array(cols).fill(1);}
  function draw(){
    if(!active)return;
    ctx.fillStyle="rgba(0,0,0,0.1)";
    ctx.fillRect(0,0,w,h);
    ctx.fillStyle="#00ff90";
    ctx.font=font+"px Share Tech Mono";
    for(let i=0;i<cols;i++){
      const ch=chars[Math.floor(Math.random()*chars.length)];
      const x=i*font,y=drops[i]*font;
      ctx.fillText(ch,x,y);
      if(y>h&&Math.random()>0.975)drops[i]=0;
      drops[i]+=1;
    }
    requestAnimationFrame(draw);
  }
  resize();window.addEventListener("resize",resize);

  // ===== TYPE EFFECT =====
  function type(el,text,speed,done){
    let i=0;el.textContent="";
    (function step(){
      if(i<text.length){
        el.textContent+=text.charAt(i++);
        const snd=document.getElementById("type-sound");
        snd.currentTime=0;snd.play();
        setTimeout(step,speed);
      }else if(done)done();
    })();
  }

  // ===== MAIN SEQUENCE =====
  const opening=document.getElementById("opening");
  const cli=document.getElementById("cli");
  const glitchSound=document.getElementById("glitch-sound");
  const hero=document.getElementById("hero");

  function startSequence(){
    // 1.5s image hold
    setTimeout(()=>{
      // glitch burst
      opening.classList.add("glitch");
      glitchSound.currentTime=0;glitchSound.play();
    },1500);

    // switch to matrix
    setTimeout(()=>{
      opening.classList.remove("glitch");
      const img=opening.querySelector("img");img.style.display="none";
      canvas.classList.add("show");active=true;draw();
      type(cli,"> stay calm, human.",100,()=>{
        setTimeout(()=>type(cli,"> the oracle awakens.",100,()=>{
          // fade out matrix + intro
          setTimeout(()=>{
            opening.classList.add("hide");
            canvas.classList.remove("show");
            hero.classList.add("show");
          },2000);
        }),600);
      });
    },2800);
  }

  if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",startSequence);
  else startSequence();
  </script>
</body>
</html>
